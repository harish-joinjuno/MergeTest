<?php

namespace App;

use App\Events\UserProfileCompleted;
use App\Events\UserProfileUpdated;
use App\Facades\Mailchimp;
use Illuminate\Database\Eloquent\Model;
use Illuminate\Support\Carbon;
use Illuminate\Support\Collection;
use Illuminate\Support\Str;
use Propaganistas\LaravelPhone\PhoneNumber;

/**
 * @property int $id
 * @property int $user_id
 * @property int $university_id
 * @property int $degree_id
 * @property int $grad_degree_id
 * @property int $grad_university_id
 *
 * @property string $immigration_status
 * @property string $application_status
 * @property string $enrollment_status
 * @property string $cosigner_status
 * @property string $grad_enrollment_status
 * @property string $degree_format
 * @property int $graduation_year
 * @property string $credit_score
 * @property string $cosigner_credit_score
 * @property int $annual_income
 * @property string $referral_code
 * @property string $phone_number
 * @property string $loan_type
 * @property string $role
 * @property string $grad_degree_format
 * @property string $zip_code
 * @property int $grad_graduation_year
 * @property int $cosigner_annual_income
 * @property array $loan_amounts
 * @property string $signup_progress
 * @property string $quality
 * @property string $ip_address
 * @property string $user_agent
 * @property int    $housing_payment
 * @property float  $current_interest_rate
 * @property int $country_of_citizenship_id
 * @property int $country_of_residence_id
 * @property int $visa_id
 * @property string $cosigner_immigration_status
 * @property int $cosigner_country_of_citizenship_id
 * @property int $cosigner_country_of_residence_id
 * @property int $cosigner_visa_id
 * @property bool $open_to_variable_rates
 * @property bool $ssn
 * @property bool $has_access_to_deal
 * @property bool $is_medical
 * @property string $utm_source
 * @property string $utm_medium
 * @property string $utm_campaign
 * @property string $utm_term
 * @property string $utm_content
 * @property string $utm_id
 * @property string $gclid
 * @property string $ga
 * @property string $fbp
 * @property string $went_to_graduate_school
 * @property int $analytics_source_id
 * @property boolean $bar_prep_app_started
 * @property-read AnalyticsSource $analyticsSource
 * @property int $analytics_source_rule_id
 * @property-read AnalyticsSourceRule $analyticsSourceRule
 *
 * @property Carbon $created_at
 * @property Carbon $updated_at
 *
 * @property-read User $user
 * @property-read University $university
 * @property-read University $gradUniversity
 * @property-read Degree $degree
 * @property-read Degree $gradDegree
 * @property-read Collection|LoanAmount[] $loanAmounts
 * @property-read Country $countryOfCitizenship
 * @property-read Country $countryOfResidence
 * @property-read Visa $visa
 * @property-read Country $cosignerCountryOfCitizenship
 * @property-read Country $cosignerCountryOfResidence
 * @property-read Visa $cosignerVisa
 *
 * @property string $refinance_loan_type
 * @property boolean $is_currently_employed
 * @property boolean $have_job_start_date
 * @property Carbon $job_start_date
 */
class UserProfile extends Model
{
    const IMMIGRATION_STATUS_US_CITIZEN_OR_PERMANENT_RESIDENT  = 'U.S. Citizen or U.S. Permanent Resident';
    const IMMIGRATION_STATUS_US_CONDITIONAL_PERMANENT_RESIDENT = 'Conditional U.S. Permanent Resident';
    const IMMIGRATION_STATUS_DACA_RECIPIENT                    = 'DACA Recipient';
    const IMMIGRATION_STATUS_OTHER                             = 'International';

    const LOAN_TYPE_BAR_PREP                       = 'bar-prep';
    const LOAN_TYPE_GRADUATE                       = 'graduate';
    const LOAN_TYPE_UNDERGRADUATE                  = 'undergraduate';
    const LOAN_TYPE_REFINANCE                      = 'refinance';
    const LOAN_TYPE_INTERNATIONAL_HEALTH_INSURANCE = 'international_health_insurance';
    const LOAN_TYPE_AUTO_REFINANCE                 = 'auto-refinance';

    const ENROLLMENT_STATUS_FULL_TIME = 'Full-Time';
    const ENROLLMENT_STATUS_HALF_TIME = 'Half-Time';
    const ENROLLMENT_STATUS_PART_TIME = 'Part-Time';
    const ENROLLMENT_STATUS_OTHER     = 'Other';

    const DEGREE_FORMAT_ON_CAMPUS = 'On Campus';
    const DEGREE_FORMAT_ONLINE    = 'Online';
    const DEGREE_FORMAT_BLENDED   = 'Blended';
    const DEGREE_FORMAT_OTHER     = 'Other';

    const CREDIT_SCORE_ABOVE_800           = 'Above 800';
    const CREDIT_SCORE_BETWEEN_750_AND_799 = '750 - 799';
    const CREDIT_SCORE_BETWEEN_700_AND_749 = '700 - 749';
    const CREDIT_SCORE_BETWEEN_650_AND_699 = '650 - 699';
    const CREDIT_SCORE_BETWEEN_550_AND_649 = '550 - 649';
    const CREDIT_SCORE_BELOW_550           = 'Below 550';
    const CREDIT_SCORE_BELOW_650           = 'Below 650';
    const CREDIT_SCORE_ABOVE_650           = 'Above 650';
    const CREDIT_SCORE_I_DONT_HAVE         = "I don't have a Credit Score";
    const CREDIT_SCORE_UNKNOWN             = 'Unknown';

    const ROLE_STUDENT = 'Student';
    const ROLE_PARENT  = 'Parent';

    const COSIGNER_STATUS_NO    = 'No';
    const COSIGNER_STATUS_YES   = 'Yes';
    const COSIGNER_STATUS_MAYBE = 'Maybe';

    const SIGNUP_PROGRESS_INTRO_ONE                      = 'intro-one';
    const SIGNUP_PROGRESS_LOAN_TYPE                      = 'loan-type';
    const SIGNUP_PROGRESS_STUDENT_LOANS                  = 'student-loans';
    const SIGNUP_PROGRESS_PERSONAL_INFO                  = 'personal-info';
    const SIGNUP_PROGRESS_SCHOOL_UNDERGRAD               = 'school-undergrad';
    const SIGNUP_PROGRESS_SCHOOL_GRAD                    = 'school-grad';
    const SIGNUP_PROGRESS_FINANCIALS                     = 'financials';
    const SIGNUP_PROGRESS_INTERNATIONAL_HEALTH_INSURANCE = 'health_insurance';
    const SIGNUP_PROGRESS_COMPLETED                      = 'completed';

    const QUALITY_GOOD                     = 'good';
    const QUALITY_BAD                      = 'bad';

    const UTM_MEMBER_REFERRAL              = 'member-referral';

    const ROLES = [
        self::ROLE_PARENT,
        self::ROLE_STUDENT,
    ];

    const CITIZENSHIP_STATUSES = [
        self::IMMIGRATION_STATUS_US_CITIZEN_OR_PERMANENT_RESIDENT  => self::IMMIGRATION_STATUS_US_CITIZEN_OR_PERMANENT_RESIDENT,
        self::IMMIGRATION_STATUS_US_CONDITIONAL_PERMANENT_RESIDENT => self::IMMIGRATION_STATUS_US_CONDITIONAL_PERMANENT_RESIDENT,
        self::IMMIGRATION_STATUS_DACA_RECIPIENT                    => self::IMMIGRATION_STATUS_DACA_RECIPIENT,
        self::IMMIGRATION_STATUS_OTHER                             => self::IMMIGRATION_STATUS_OTHER,
    ];

    const ENROLLMENT_STATUSES = [
        self::ENROLLMENT_STATUS_FULL_TIME,
        self::ENROLLMENT_STATUS_HALF_TIME,
        self::ENROLLMENT_STATUS_PART_TIME,
        self::ENROLLMENT_STATUS_OTHER,
    ];

    const DEGREE_FORMATS = [
        self::DEGREE_FORMAT_ON_CAMPUS,
        self::DEGREE_FORMAT_ONLINE,
        self::DEGREE_FORMAT_BLENDED,
        self::DEGREE_FORMAT_OTHER,
    ];

    const CREDIT_SCORES = [
        self::CREDIT_SCORE_ABOVE_800           => self::CREDIT_SCORE_ABOVE_800,
        self::CREDIT_SCORE_BETWEEN_750_AND_799 => self::CREDIT_SCORE_BETWEEN_750_AND_799,
        self::CREDIT_SCORE_BETWEEN_700_AND_749 => self::CREDIT_SCORE_BETWEEN_700_AND_749,
        self::CREDIT_SCORE_BETWEEN_650_AND_699 => self::CREDIT_SCORE_BETWEEN_650_AND_699,
        self::CREDIT_SCORE_BETWEEN_550_AND_649 => self::CREDIT_SCORE_BETWEEN_550_AND_649,
        self::CREDIT_SCORE_BELOW_550           => self::CREDIT_SCORE_BELOW_550,
        self::CREDIT_SCORE_UNKNOWN             => self::CREDIT_SCORE_UNKNOWN,
        self::CREDIT_SCORE_I_DONT_HAVE         => self::CREDIT_SCORE_I_DONT_HAVE,
    ];

    const COSIGNER_STATUSES = [
        self::COSIGNER_STATUS_NO,
        self::COSIGNER_STATUS_YES,
        self::COSIGNER_STATUS_MAYBE,
    ];

    protected $fillable = [

        'immigration_status',
        'application_status',
        'role',
        'loan_type',

        // International Related
        'country_of_citizenship_id',
        'country_of_residence_id',
        'has_us_cosigner',
        'is_daca_recipient',
        'visa_id',

        // School Related
        'university_id',
        'degree_id',
        'graduation_year',
        'enrollment_status',
        'degree_format',

        // Grad School Related
        'grad_university_id',
        'grad_degree_id',
        'grad_graduation_year',
        'grad_enrollment_status',
        'grad_degree_format',

        // Finances Related
        'phone_number',
        'credit_score',
        'cosigner_status',
        'cosigner_credit_score',
        'annual_income',
        'open_to_variable_rates',
        'zip_code',

        // Foreign Key
        'user_id',

        // Tracking Sources
        'utm_source',
        'utm_medium',
        'utm_campaign',
        'utm_term',
        'utm_content',
        'utm_id',
        'gclid',

        //medical
        'is_medical',

        //refinancing information
        'refinance_loan_type',
        'is_currently_employed',
        'have_job_start_date',
        'job_start_date',
    ];

    protected $casts = [

    ];

    public function user()
    {
        return $this->belongsTo(User::class);
    }

    public function analyticsSource()
    {
        return $this->belongsTo(AnalyticsSource::class);
    }

    public function analyticsSourceRule()
    {
        return $this->belongsTo(AnalyticsSourceRule::class);
    }

    public function countryOfCitizenship()
    {
        return $this->belongsTo(Country::class,'country_of_citizenship_id');
    }

    public function countryOfResidence()
    {
        return $this->belongsTo(Country::class,'country_of_residence_id');
    }

    public function visa()
    {
        return $this->belongsTo(Visa::class);
    }

    public function cosignerCountryOfCitizenship()
    {
        return $this->belongsTo(Country::class,'country_of_citizenship_id');
    }

    public function cosignerCountryOfResidence()
    {
        return $this->belongsTo(Country::class,'country_of_residence_id');
    }

    public function cosignerVisa()
    {
        return $this->belongsTo(Visa::class);
    }

    public function university()
    {
        return $this->belongsTo(University::class);
    }

    public function degree()
    {
        return $this->belongsTo(Degree::class);
    }

    public function gradUniversity()
    {
        return $this->belongsTo(University::class);
    }

    public function gradDegree()
    {
        return $this->belongsTo(Degree::class);
    }

    public function loanAmounts()
    {
        $relation = $this->hasMany(LoanAmount::class);
        $relation
            ->orderBy('loan_amounts.year')
            ->orderBy('loan_amounts.semester');

        return $relation;
    }

    public function matchingEligibleProfile(NegotiationGroup $negotiationGroup)
    {
        $eligibleProfiles = $negotiationGroup->eligibleProfiles;
        /** @var NegotiationGroupEligibleProfile $eligibleProfile */
        foreach ($eligibleProfiles as $eligibleProfile) {
            if ($eligibleProfile->matches($this)) {
                return $eligibleProfile;
            }
        }

        return null;
    }

    public function loanAmountForAcademicYear(AcademicYear $academicYear)
    {
        /** @var LoanAmount $loanAmount */
        $loanAmount = $this->loanAmounts()
            ->select([
                'loan_amounts.id',
            ])
            ->where('loan_amounts.year', '=', $academicYear->starts_on->year)
            ->first();

        return $loanAmount;
    }

    public function saveProgress($signupProgress)
    {
        $updating = $this->signup_progress == self::SIGNUP_PROGRESS_COMPLETED;

        if (!$updating) {
            $this->signup_progress = $signupProgress;
        }

        $this->save();
        $this->user->touch();

        if ($updating) {
            event(new UserProfileUpdated($this->user));
        }

        if (!$updating && $signupProgress == UserProfile::SIGNUP_PROGRESS_COMPLETED) {
            event(new UserProfileCompleted($this->user));
        }
    }

    public function isRefinance()
    {
        return $this->loan_type == self::LOAN_TYPE_REFINANCE;
    }

    public function isValidStep(string $step)
    {
        if (!$this->signup_progress) {
            return $step == self::SIGNUP_PROGRESS_INTRO_ONE;
        }

        if ($this->signup_progress == self::SIGNUP_PROGRESS_COMPLETED) {
            return true;
        }

        if ($this->signup_progress == self::SIGNUP_PROGRESS_INTRO_ONE) {
            return in_array($step, [
                self::SIGNUP_PROGRESS_INTRO_ONE,
                self::SIGNUP_PROGRESS_LOAN_TYPE,
            ]);
        }

        if ($this->signup_progress == self::SIGNUP_PROGRESS_LOAN_TYPE) {
            return in_array($step, [
                self::SIGNUP_PROGRESS_LOAN_TYPE,
                self::SIGNUP_PROGRESS_PERSONAL_INFO,
            ]);
        }

        if ($this->signup_progress == self::SIGNUP_PROGRESS_PERSONAL_INFO) {
            return in_array($step, [
                self::SIGNUP_PROGRESS_PERSONAL_INFO,
                $this->loan_type == self::LOAN_TYPE_GRADUATE ?
                    self::SIGNUP_PROGRESS_SCHOOL_GRAD :
                    self::SIGNUP_PROGRESS_SCHOOL_UNDERGRAD,
            ]);
        }

        if (in_array($this->signup_progress, [
            self::SIGNUP_PROGRESS_SCHOOL_GRAD,
            self::SIGNUP_PROGRESS_SCHOOL_UNDERGRAD,
        ])) {
            return in_array($step, [
                $this->loan_type == self::LOAN_TYPE_GRADUATE ?
                    self::SIGNUP_PROGRESS_SCHOOL_GRAD :
                    self::SIGNUP_PROGRESS_SCHOOL_UNDERGRAD,
                self::SIGNUP_PROGRESS_FINANCIALS,
            ]);
        }

        if ($this->signup_progress == self::SIGNUP_PROGRESS_FINANCIALS) {
            return in_array($step, [
                self::SIGNUP_PROGRESS_FINANCIALS,
            ]);
        }

        return false;
    }

    public function isParent()
    {
        return $this->role == self::ROLE_PARENT;
    }

    public function hasCosigner(string $old = null)
    {
        return $old ?? $this->cosigner_status == self::COSIGNER_STATUS_YES;
    }

    public function isUndergradStudent()
    {
        // If Grad Degree ID is not set and Degree ID is set.
        if (!$this->grad_degree_id && $this->degree_id) {
            return true;
        }

        return false;
    }

    public function isGradStudent()
    {
        if ($this->grad_degree_id) {
            return true;
        }

        return false;
    }

//    public function findAvailableAcademicYears()
//    {
//        $today = today()->startOfDay();
//
//        if (empty($this->grad_graduation_year) && empty($this->graduation_year)) {
//            return collect();
//        }
//
//        $query = AcademicYear::query()
//            ->where('ends_on', '>=', $today);
//
//        if ($this->grad_graduation_year) {
//            $this->grad_graduation_year < $today->year ?
//                $query->where('refinance', '=', true) :
//                $query->whereRaw('YEAR(ends_on) <= ?', [$this->grad_graduation_year]);
//        } else {
//            $this->graduation_year < $today->year ?
//                $query->where('refinance', '=', true) :
//                $query->whereRaw('YEAR(ends_on) <= ?', [$this->graduation_year]);
//        }
//
//        return $query->get();
//    }

    public function placeInEligibleNegotiationGroups(AcademicYear $academicYear)
    {
        $availableNegotiationGroups      = $academicYear->negotiationGroups;
        $negotiationGroupEligibleProfile = null;
        foreach ($availableNegotiationGroups as $negotiationGroup) {
            $negotiationGroupEligibleProfile = $this->matchingEligibleProfile($negotiationGroup);
            if ($negotiationGroupEligibleProfile) {
                break;
            }
        }

        if (!$negotiationGroupEligibleProfile) {
            return;
        }

        $negotiationGroupUser                                        = NegotiationGroupUser::where('academic_year_id',$academicYear->id)->where('user_id',$this->user->id)->firstOrNew();
        $negotiationGroupUser->status                                = NegotiationGroupUser::STATUS_PENDING;
        $negotiationGroupUser->user_id                               = $this->user_id;
        $negotiationGroupUser->academic_year_id                      = $academicYear->id;
        $negotiationGroupUser->negotiation_group_id                  = $negotiationGroupEligibleProfile->negotiation_group_id;
        $negotiationGroupUser->negotiation_group_eligible_profile_id = $negotiationGroupEligibleProfile->id;
        $negotiationGroupUser->save();
    }

    //TODO Should replace with more solid solution
//    public function setPhoneNumberAttribute($value)
//    {
//        $this->attributes['phone_number'] = $value ? PhoneNumber::make($value, ['auto','US'])->formatE164() : null;
//    }

    public function syncWithMailchimp()
    {
        $tags = ['lead', 'registration_complete'];

        if ($this->role == self::ROLE_STUDENT) {
            $tags[] = 'student';
        }

        if ($this->role == self::ROLE_PARENT) {
            $tags[] = 'parent';
        }

        if ($this->profileCompleted()) {
            $tags[] = 'profile_complete';
        }

        if ($this->loan_type == 'refinance') {
            $tags[] = 'signed_up_for_refinance';
        }

        $this->user->negotiationGroupUsers->each(function (NegotiationGroupUser $negotiationGroupUser) use (&$tags) {
            if ($negotiationGroupUser->academicYear) {
                $tags[] = 'ay-' . Str::slug($negotiationGroupUser->academicYear->name);
            }
            if ($negotiationGroupUser->negotiationGroup) {
                $tags[] = 'ng-' . $negotiationGroupUser->negotiationGroup->slug;
            }
        });

        $this->user->accessTheDeals->unique('loan_status_id')->each(function (AccessTheDeal $accessTheDeal) use (&$tags) {
            $tags[] = $accessTheDeal->dealStatus->slug;
        });

        $this->user->referralProgramUsers->each(function (ReferralProgramUser $referralProgramUser) use (&$tags) {
            array_push($tags, 'rp-' . $referralProgramUser->referralProgram->slug);
        });

        if ($this->user->autoRefinanceApplications->count()) {
            array_push($tags, 'auto_refi_app_start');
        }

        /** @var UserProfile $userProfiles */
        $userProfiles = UserProfile::query()
            ->select([
                'user_profiles.*',
                'users.first_name',
                'users.email',
                'users.referral_code',
                'universities.name as university_name',
                'degrees.name as degree_name',
                'grad_universities.name as grad_university_name',
                'grad_degrees.name as grad_degree_name',
                'referred_by_user.first_name as referred_by_name',
            ])
            ->join('users', 'users.id', '=', 'user_profiles.user_id')
            ->leftJoin('universities', 'universities.id', '=', 'user_profiles.university_id')
            ->leftjoin('degrees', 'degrees.id', '=', 'user_profiles.degree_id')
            ->leftJoin('universities as grad_universities', 'grad_universities.id', '=', 'user_profiles.grad_university_id')
            ->leftjoin('degrees as grad_degrees', 'grad_degrees.id', '=', 'user_profiles.grad_degree_id')
            ->leftJoin('users as referred_by_user', 'referred_by_user.id', '=', 'users.referred_by_id')
            ->where('users.id', '=', $this->user_id)
            ->first();

        /** @var User $user */
        $user = User::find($userProfiles->user_id);
        if (!$user) {
            throw new \Exception('How does a user profile exist without a user?');
        }

        $data = [
            'FNAME'          => $userProfiles->first_name ?? '',
            'TYPE'           => $userProfiles->immigration_status ?? '',
            'CODE'           => $userProfiles->referral_code ?? '',
            'UNI'            => $userProfiles->university_name ?? '',
            'DEGREE'         => $userProfiles->degree_name ?? '',
            'GRADYEAR'       => $userProfiles->graduation_year ?? '',
            'REFERREDBY'     => $userProfiles->referred_by_name ?? '',
            'G_UNI'          => $userProfiles->grad_university_name ?? '',
            'G_DEGREE'       => $userProfiles->grad_degree_name ?? '',
            'G_GRADYEAR'     => $userProfiles->grad_graduation_year ?? '',
            'REF_PRO_ID'     => $user->currentReferralProgramUser() ? $user->currentReferralProgramUser()->referral_program_id : '',
            'REFLINK'        => $user->referral_link,
            'REFI_LOAN_TYPE' => $userProfiles->refinance_loan_type ?? '',
        ];

        Mailchimp::syncSubscriber($this->user->email, $data, $tags);
    }

    public function hasZipCodeInMichiganOrMass()
    {
        $valid_zip_codes = [
            '40003',
            '40004',
            '40006',
            '40007',
            '40008',
            '40009',
            '40010',
            '40011',
            '40012',
            '40013',
            '40014',
            '40018',
            '40019',
            '40020',
            '40022',
            '40023',
            '40025',
            '40026',
            '40027',
            '40031',
            '40032',
            '40033',
            '40036',
            '40037',
            '40040',
            '40041',
            '40045',
            '40046',
            '40047',
            '40048',
            '40049',
            '40050',
            '40051',
            '40052',
            '40055',
            '40056',
            '40057',
            '40058',
            '40059',
            '40060',
            '40061',
            '40062',
            '40063',
            '40065',
            '40066',
            '40067',
            '40068',
            '40069',
            '40070',
            '40071',
            '40075',
            '40076',
            '40077',
            '40078',
            '40104',
            '40107',
            '40108',
            '40109',
            '40110',
            '40111',
            '40115',
            '40117',
            '40118',
            '40119',
            '40121',
            '40122',
            '40129',
            '40140',
            '40142',
            '40143',
            '40144',
            '40145',
            '40146',
            '40150',
            '40152',
            '40153',
            '40155',
            '40157',
            '40159',
            '40160',
            '40161',
            '40162',
            '40165',
            '40166',
            '40170',
            '40171',
            '40175',
            '40176',
            '40177',
            '40178',
            '40201',
            '40202',
            '40203',
            '40204',
            '40205',
            '40206',
            '40207',
            '40208',
            '40209',
            '40210',
            '40211',
            '40212',
            '40213',
            '40214',
            '40215',
            '40216',
            '40217',
            '40218',
            '40219',
            '40220',
            '40221',
            '40222',
            '40223',
            '40224',
            '40225',
            '40228',
            '40229',
            '40231',
            '40232',
            '40233',
            '40241',
            '40242',
            '40243',
            '40245',
            '40250',
            '40251',
            '40252',
            '40253',
            '40255',
            '40256',
            '40257',
            '40258',
            '40259',
            '40261',
            '40266',
            '40268',
            '40269',
            '40270',
            '40272',
            '40280',
            '40281',
            '40282',
            '40283',
            '40285',
            '40287',
            '40289',
            '40290',
            '40291',
            '40292',
            '40293',
            '40294',
            '40295',
            '40296',
            '40297',
            '40298',
            '40299',
            '40310',
            '40311',
            '40312',
            '40313',
            '40316',
            '40317',
            '40319',
            '40322',
            '40324',
            '40328',
            '40330',
            '40334',
            '40336',
            '40337',
            '40339',
            '40340',
            '40342',
            '40346',
            '40347',
            '40348',
            '40350',
            '40351',
            '40353',
            '40355',
            '40356',
            '40357',
            '40358',
            '40359',
            '40360',
            '40361',
            '40362',
            '40363',
            '40366',
            '40370',
            '40371',
            '40372',
            '40374',
            '40376',
            '40379',
            '40380',
            '40383',
            '40384',
            '40385',
            '40386',
            '40387',
            '40390',
            '40391',
            '40392',
            '40402',
            '40403',
            '40404',
            '40405',
            '40409',
            '40410',
            '40419',
            '40422',
            '40423',
            '40434',
            '40437',
            '40440',
            '40442',
            '40444',
            '40445',
            '40446',
            '40447',
            '40448',
            '40452',
            '40456',
            '40460',
            '40461',
            '40464',
            '40468',
            '40472',
            '40473',
            '40475',
            '40476',
            '40481',
            '40484',
            '40486',
            '40488',
            '40489',
            '40492',
            '40495',
            '40502',
            '40503',
            '40504',
            '40505',
            '40506',
            '40507',
            '40508',
            '40509',
            '40510',
            '40511',
            '40512',
            '40513',
            '40514',
            '40515',
            '40516',
            '40517',
            '40522',
            '40523',
            '40524',
            '40526',
            '40533',
            '40536',
            '40544',
            '40546',
            '40550',
            '40555',
            '40574',
            '40575',
            '40576',
            '40577',
            '40578',
            '40579',
            '40580',
            '40581',
            '40582',
            '40583',
            '40588',
            '40591',
            '40598',
            '40601',
            '40602',
            '40603',
            '40604',
            '40618',
            '40619',
            '40620',
            '40621',
            '40622',
            '40701',
            '40702',
            '40724',
            '40729',
            '40730',
            '40734',
            '40737',
            '40740',
            '40741',
            '40742',
            '40743',
            '40744',
            '40745',
            '40750',
            '40754',
            '40755',
            '40759',
            '40763',
            '40769',
            '40771',
            '40801',
            '40803',
            '40806',
            '40807',
            '40808',
            '40810',
            '40813',
            '40815',
            '40816',
            '40818',
            '40819',
            '40820',
            '40823',
            '40824',
            '40826',
            '40827',
            '40828',
            '40829',
            '40830',
            '40831',
            '40840',
            '40843',
            '40844',
            '40845',
            '40847',
            '40849',
            '40854',
            '40855',
            '40856',
            '40858',
            '40862',
            '40863',
            '40865',
            '40868',
            '40870',
            '40873',
            '40874',
            '40902',
            '40903',
            '40906',
            '40913',
            '40914',
            '40915',
            '40921',
            '40923',
            '40927',
            '40930',
            '40931',
            '40932',
            '40935',
            '40939',
            '40940',
            '40941',
            '40943',
            '40944',
            '40946',
            '40949',
            '40951',
            '40953',
            '40955',
            '40958',
            '40962',
            '40964',
            '40965',
            '40972',
            '40977',
            '40979',
            '40981',
            '40982',
            '40983',
            '40988',
            '40995',
            '40997',
            '40999',
            '41001',
            '41002',
            '41003',
            '41004',
            '41005',
            '41006',
            '41007',
            '41008',
            '41010',
            '41011',
            '41012',
            '41014',
            '41015',
            '41016',
            '41017',
            '41018',
            '41019',
            '41021',
            '41022',
            '41025',
            '41030',
            '41031',
            '41033',
            '41034',
            '41035',
            '41037',
            '41039',
            '41040',
            '41041',
            '41042',
            '41043',
            '41044',
            '41045',
            '41046',
            '41048',
            '41049',
            '41051',
            '41052',
            '41053',
            '41054',
            '41055',
            '41056',
            '41059',
            '41061',
            '41062',
            '41063',
            '41064',
            '41065',
            '41071',
            '41072',
            '41073',
            '41074',
            '41075',
            '41076',
            '41080',
            '41081',
            '41083',
            '41085',
            '41086',
            '41091',
            '41092',
            '41093',
            '41094',
            '41095',
            '41096',
            '41097',
            '41098',
            '41099',
            '41101',
            '41102',
            '41105',
            '41114',
            '41121',
            '41124',
            '41128',
            '41129',
            '41132',
            '41135',
            '41139',
            '41141',
            '41142',
            '41143',
            '41144',
            '41146',
            '41149',
            '41159',
            '41160',
            '41164',
            '41166',
            '41168',
            '41169',
            '41171',
            '41173',
            '41174',
            '41175',
            '41179',
            '41180',
            '41181',
            '41183',
            '41189',
            '41201',
            '41203',
            '41204',
            '41214',
            '41216',
            '41219',
            '41222',
            '41224',
            '41226',
            '41230',
            '41231',
            '41232',
            '41234',
            '41238',
            '41240',
            '41250',
            '41254',
            '41255',
            '41256',
            '41257',
            '41260',
            '41262',
            '41263',
            '41264',
            '41265',
            '41267',
            '41268',
            '41271',
            '41274',
            '41301',
            '41307',
            '41310',
            '41311',
            '41313',
            '41314',
            '41317',
            '41332',
            '41333',
            '41338',
            '41339',
            '41347',
            '41348',
            '41351',
            '41352',
            '41360',
            '41362',
            '41364',
            '41365',
            '41366',
            '41367',
            '41368',
            '41385',
            '41386',
            '41390',
            '41397',
            '41408',
            '41413',
            '41421',
            '41425',
            '41426',
            '41433',
            '41451',
            '41459',
            '41464',
            '41465',
            '41472',
            '41477',
            '41501',
            '41502',
            '41503',
            '41512',
            '41513',
            '41514',
            '41517',
            '41519',
            '41520',
            '41522',
            '41524',
            '41526',
            '41527',
            '41528',
            '41531',
            '41534',
            '41535',
            '41537',
            '41538',
            '41539',
            '41540',
            '41542',
            '41543',
            '41544',
            '41547',
            '41548',
            '41549',
            '41553',
            '41554',
            '41555',
            '41557',
            '41558',
            '41559',
            '41560',
            '41561',
            '41562',
            '41563',
            '41564',
            '41566',
            '41567',
            '41568',
            '41571',
            '41572',
            '41601',
            '41602',
            '41603',
            '41604',
            '41605',
            '41606',
            '41607',
            '41612',
            '41615',
            '41616',
            '41619',
            '41621',
            '41622',
            '41630',
            '41631',
            '41632',
            '41635',
            '41636',
            '41640',
            '41642',
            '41643',
            '41645',
            '41647',
            '41649',
            '41650',
            '41651',
            '41653',
            '41655',
            '41659',
            '41660',
            '41663',
            '41666',
            '41667',
            '41669',
            '41701',
            '41702',
            '41712',
            '41713',
            '41714',
            '41719',
            '41721',
            '41722',
            '41723',
            '41725',
            '41727',
            '41729',
            '41731',
            '41735',
            '41736',
            '41739',
            '41740',
            '41743',
            '41745',
            '41746',
            '41747',
            '41749',
            '41751',
            '41754',
            '41759',
            '41760',
            '41762',
            '41763',
            '41764',
            '41766',
            '41772',
            '41773',
            '41774',
            '41775',
            '41776',
            '41777',
            '41778',
            '41804',
            '41810',
            '41812',
            '41815',
            '41817',
            '41819',
            '41821',
            '41822',
            '41824',
            '41825',
            '41826',
            '41828',
            '41831',
            '41832',
            '41833',
            '41834',
            '41835',
            '41836',
            '41837',
            '41838',
            '41839',
            '41840',
            '41843',
            '41844',
            '41845',
            '41847',
            '41848',
            '41849',
            '41855',
            '41858',
            '41859',
            '41861',
            '41862',
            '42001',
            '42002',
            '42003',
            '42020',
            '42021',
            '42022',
            '42023',
            '42024',
            '42025',
            '42027',
            '42028',
            '42029',
            '42031',
            '42032',
            '42033',
            '42035',
            '42036',
            '42037',
            '42038',
            '42039',
            '42040',
            '42041',
            '42044',
            '42045',
            '42047',
            '42048',
            '42049',
            '42050',
            '42051',
            '42053',
            '42054',
            '42055',
            '42056',
            '42058',
            '42060',
            '42061',
            '42063',
            '42064',
            '42066',
            '42069',
            '42070',
            '42071',
            '42076',
            '42078',
            '42079',
            '42081',
            '42082',
            '42083',
            '42084',
            '42085',
            '42086',
            '42087',
            '42088',
            '42101',
            '42102',
            '42103',
            '42104',
            '42120',
            '42122',
            '42123',
            '42124',
            '42127',
            '42128',
            '42129',
            '42130',
            '42131',
            '42133',
            '42134',
            '42135',
            '42140',
            '42141',
            '42142',
            '42151',
            '42152',
            '42153',
            '42154',
            '42156',
            '42157',
            '42159',
            '42160',
            '42163',
            '42164',
            '42166',
            '42167',
            '42170',
            '42171',
            '42201',
            '42202',
            '42204',
            '42206',
            '42207',
            '42210',
            '42211',
            '42214',
            '42215',
            '42216',
            '42217',
            '42219',
            '42220',
            '42221',
            '42223',
            '42232',
            '42234',
            '42236',
            '42240',
            '42241',
            '42252',
            '42254',
            '42256',
            '42259',
            '42261',
            '42262',
            '42265',
            '42266',
            '42273',
            '42274',
            '42275',
            '42276',
            '42280',
            '42283',
            '42285',
            '42286',
            '42287',
            '42288',
            '42301',
            '42302',
            '42303',
            '42304',
            '42320',
            '42321',
            '42322',
            '42323',
            '42324',
            '42325',
            '42326',
            '42327',
            '42328',
            '42330',
            '42332',
            '42333',
            '42334',
            '42337',
            '42338',
            '42339',
            '42343',
            '42344',
            '42345',
            '42347',
            '42348',
            '42349',
            '42350',
            '42351',
            '42352',
            '42354',
            '42355',
            '42356',
            '42361',
            '42364',
            '42366',
            '42367',
            '42368',
            '42369',
            '42370',
            '42371',
            '42372',
            '42374',
            '42375',
            '42376',
            '42377',
            '42378',
            '42402',
            '42403',
            '42404',
            '42406',
            '42408',
            '42409',
            '42410',
            '42411',
            '42413',
            '42419',
            '42420',
            '42431',
            '42436',
            '42437',
            '42440',
            '42441',
            '42442',
            '42444',
            '42445',
            '42450',
            '42451',
            '42452',
            '42453',
            '42455',
            '42456',
            '42457',
            '42458',
            '42459',
            '42460',
            '42461',
            '42462',
            '42463',
            '42464',
            '42501',
            '42502',
            '42503',
            '42516',
            '42518',
            '42519',
            '42528',
            '42533',
            '42539',
            '42541',
            '42544',
            '42553',
            '42558',
            '42564',
            '42565',
            '42566',
            '42567',
            '42602',
            '42603',
            '42629',
            '42631',
            '42633',
            '42634',
            '42635',
            '42638',
            '42642',
            '42647',
            '42649',
            '42653',
            '42701',
            '42702',
            '42712',
            '42713',
            '42715',
            '42716',
            '42717',
            '42718',
            '42719',
            '42720',
            '42721',
            '42722',
            '42724',
            '42726',
            '42728',
            '42729',
            '42731',
            '42732',
            '42733',
            '42740',
            '42741',
            '42742',
            '42743',
            '42746',
            '42748',
            '42749',
            '42753',
            '42754',
            '42755',
            '42757',
            '42758',
            '42759',
            '42762',
            '42764',
            '42765',
            '42776',
            '42782',
            '42784',
            '42788',
            '48001',
            '48002',
            '48003',
            '48004',
            '48005',
            '48006',
            '48007',
            '48009',
            '48012',
            '48014',
            '48015',
            '48017',
            '48021',
            '48022',
            '48023',
            '48025',
            '48026',
            '48027',
            '48028',
            '48030',
            '48032',
            '48033',
            '48034',
            '48035',
            '48036',
            '48037',
            '48038',
            '48039',
            '48040',
            '48041',
            '48042',
            '48043',
            '48044',
            '48045',
            '48046',
            '48047',
            '48048',
            '48049',
            '48050',
            '48051',
            '48054',
            '48059',
            '48060',
            '48061',
            '48062',
            '48063',
            '48064',
            '48065',
            '48066',
            '48067',
            '48068',
            '48069',
            '48070',
            '48071',
            '48072',
            '48073',
            '48074',
            '48075',
            '48076',
            '48079',
            '48080',
            '48081',
            '48082',
            '48083',
            '48084',
            '48085',
            '48086',
            '48088',
            '48089',
            '48090',
            '48091',
            '48092',
            '48093',
            '48094',
            '48095',
            '48096',
            '48097',
            '48098',
            '48099',
            '48101',
            '48103',
            '48104',
            '48105',
            '48106',
            '48107',
            '48108',
            '48109',
            '48110',
            '48111',
            '48112',
            '48113',
            '48114',
            '48115',
            '48116',
            '48117',
            '48118',
            '48120',
            '48121',
            '48122',
            '48123',
            '48124',
            '48125',
            '48126',
            '48127',
            '48128',
            '48130',
            '48131',
            '48133',
            '48134',
            '48135',
            '48136',
            '48137',
            '48138',
            '48139',
            '48140',
            '48141',
            '48143',
            '48144',
            '48145',
            '48146',
            '48150',
            '48151',
            '48152',
            '48153',
            '48154',
            '48157',
            '48158',
            '48159',
            '48160',
            '48161',
            '48162',
            '48164',
            '48165',
            '48166',
            '48167',
            '48168',
            '48169',
            '48170',
            '48173',
            '48174',
            '48175',
            '48176',
            '48177',
            '48178',
            '48179',
            '48180',
            '48182',
            '48183',
            '48184',
            '48185',
            '48186',
            '48187',
            '48188',
            '48189',
            '48190',
            '48191',
            '48192',
            '48193',
            '48195',
            '48197',
            '48198',
            '48201',
            '48202',
            '48203',
            '48204',
            '48205',
            '48206',
            '48207',
            '48208',
            '48209',
            '48210',
            '48211',
            '48212',
            '48213',
            '48214',
            '48215',
            '48216',
            '48217',
            '48218',
            '48219',
            '48220',
            '48221',
            '48222',
            '48223',
            '48224',
            '48225',
            '48226',
            '48227',
            '48228',
            '48229',
            '48230',
            '48231',
            '48232',
            '48233',
            '48234',
            '48235',
            '48236',
            '48237',
            '48238',
            '48239',
            '48240',
            '48242',
            '48243',
            '48244',
            '48255',
            '48260',
            '48264',
            '48265',
            '48266',
            '48267',
            '48268',
            '48269',
            '48272',
            '48275',
            '48277',
            '48278',
            '48279',
            '48288',
            '48301',
            '48302',
            '48303',
            '48304',
            '48306',
            '48307',
            '48308',
            '48309',
            '48310',
            '48311',
            '48312',
            '48313',
            '48314',
            '48315',
            '48316',
            '48317',
            '48318',
            '48320',
            '48321',
            '48322',
            '48323',
            '48324',
            '48325',
            '48326',
            '48327',
            '48328',
            '48329',
            '48330',
            '48331',
            '48332',
            '48333',
            '48334',
            '48335',
            '48336',
            '48340',
            '48341',
            '48342',
            '48343',
            '48346',
            '48347',
            '48348',
            '48350',
            '48353',
            '48356',
            '48357',
            '48359',
            '48360',
            '48361',
            '48362',
            '48363',
            '48366',
            '48367',
            '48370',
            '48371',
            '48374',
            '48375',
            '48376',
            '48377',
            '48380',
            '48381',
            '48382',
            '48383',
            '48386',
            '48387',
            '48390',
            '48391',
            '48393',
            '48397',
            '48401',
            '48410',
            '48411',
            '48412',
            '48413',
            '48414',
            '48415',
            '48416',
            '48417',
            '48418',
            '48419',
            '48420',
            '48421',
            '48422',
            '48423',
            '48426',
            '48427',
            '48428',
            '48429',
            '48430',
            '48432',
            '48433',
            '48434',
            '48435',
            '48436',
            '48437',
            '48438',
            '48439',
            '48440',
            '48441',
            '48442',
            '48444',
            '48445',
            '48446',
            '48449',
            '48450',
            '48451',
            '48453',
            '48454',
            '48455',
            '48456',
            '48457',
            '48458',
            '48460',
            '48461',
            '48462',
            '48463',
            '48464',
            '48465',
            '48466',
            '48467',
            '48468',
            '48469',
            '48470',
            '48471',
            '48472',
            '48473',
            '48475',
            '48476',
            '48480',
            '48501',
            '48502',
            '48503',
            '48504',
            '48505',
            '48506',
            '48507',
            '48509',
            '48519',
            '48529',
            '48531',
            '48532',
            '48550',
            '48551',
            '48552',
            '48553',
            '48554',
            '48555',
            '48556',
            '48557',
            '48559',
            '48601',
            '48602',
            '48603',
            '48604',
            '48605',
            '48606',
            '48607',
            '48608',
            '48609',
            '48610',
            '48611',
            '48612',
            '48613',
            '48614',
            '48615',
            '48616',
            '48617',
            '48618',
            '48619',
            '48620',
            '48621',
            '48622',
            '48623',
            '48624',
            '48625',
            '48626',
            '48627',
            '48628',
            '48629',
            '48630',
            '48631',
            '48632',
            '48633',
            '48634',
            '48635',
            '48636',
            '48637',
            '48638',
            '48640',
            '48641',
            '48642',
            '48647',
            '48649',
            '48650',
            '48651',
            '48652',
            '48653',
            '48654',
            '48655',
            '48656',
            '48657',
            '48658',
            '48659',
            '48661',
            '48662',
            '48663',
            '48667',
            '48670',
            '48674',
            '48686',
            '48701',
            '48703',
            '48705',
            '48706',
            '48707',
            '48708',
            '48710',
            '48720',
            '48721',
            '48722',
            '48723',
            '48724',
            '48725',
            '48726',
            '48727',
            '48728',
            '48729',
            '48730',
            '48731',
            '48732',
            '48733',
            '48734',
            '48735',
            '48736',
            '48737',
            '48738',
            '48739',
            '48740',
            '48741',
            '48742',
            '48743',
            '48744',
            '48745',
            '48746',
            '48747',
            '48748',
            '48749',
            '48750',
            '48754',
            '48755',
            '48756',
            '48757',
            '48758',
            '48759',
            '48760',
            '48761',
            '48762',
            '48763',
            '48764',
            '48765',
            '48766',
            '48767',
            '48768',
            '48769',
            '48770',
            '48787',
            '48801',
            '48802',
            '48804',
            '48805',
            '48806',
            '48807',
            '48808',
            '48809',
            '48811',
            '48812',
            '48813',
            '48815',
            '48816',
            '48817',
            '48818',
            '48819',
            '48820',
            '48821',
            '48822',
            '48823',
            '48824',
            '48825',
            '48826',
            '48827',
            '48829',
            '48830',
            '48831',
            '48832',
            '48833',
            '48834',
            '48835',
            '48836',
            '48837',
            '48838',
            '48840',
            '48841',
            '48842',
            '48843',
            '48844',
            '48845',
            '48846',
            '48847',
            '48848',
            '48849',
            '48850',
            '48851',
            '48852',
            '48853',
            '48854',
            '48855',
            '48856',
            '48857',
            '48858',
            '48859',
            '48860',
            '48861',
            '48862',
            '48863',
            '48864',
            '48865',
            '48866',
            '48867',
            '48870',
            '48871',
            '48872',
            '48873',
            '48874',
            '48875',
            '48876',
            '48877',
            '48878',
            '48879',
            '48880',
            '48881',
            '48882',
            '48883',
            '48884',
            '48885',
            '48886',
            '48887',
            '48888',
            '48889',
            '48890',
            '48891',
            '48892',
            '48893',
            '48894',
            '48895',
            '48896',
            '48897',
            '48901',
            '48906',
            '48908',
            '48909',
            '48910',
            '48911',
            '48912',
            '48913',
            '48915',
            '48916',
            '48917',
            '48918',
            '48919',
            '48921',
            '48922',
            '48924',
            '48929',
            '48930',
            '48933',
            '48937',
            '48950',
            '48951',
            '48956',
            '48980',
            '49001',
            '49002',
            '49003',
            '49004',
            '49005',
            '49006',
            '49007',
            '49008',
            '49009',
            '49010',
            '49011',
            '49012',
            '49013',
            '49014',
            '49015',
            '49016',
            '49017',
            '49018',
            '49019',
            '49020',
            '49021',
            '49022',
            '49023',
            '49024',
            '49026',
            '49027',
            '49028',
            '49029',
            '49030',
            '49031',
            '49032',
            '49033',
            '49034',
            '49035',
            '49036',
            '49038',
            '49039',
            '49040',
            '49041',
            '49042',
            '49043',
            '49045',
            '49046',
            '49047',
            '49048',
            '49050',
            '49051',
            '49052',
            '49053',
            '49055',
            '49056',
            '49057',
            '49058',
            '49060',
            '49061',
            '49062',
            '49063',
            '49064',
            '49065',
            '49066',
            '49067',
            '49068',
            '49069',
            '49070',
            '49071',
            '49072',
            '49073',
            '49074',
            '49075',
            '49076',
            '49077',
            '49078',
            '49079',
            '49080',
            '49081',
            '49082',
            '49083',
            '49084',
            '49085',
            '49087',
            '49088',
            '49089',
            '49090',
            '49091',
            '49092',
            '49093',
            '49094',
            '49095',
            '49096',
            '49097',
            '49098',
            '49099',
            '49101',
            '49102',
            '49103',
            '49104',
            '49106',
            '49107',
            '49111',
            '49112',
            '49113',
            '49115',
            '49116',
            '49117',
            '49119',
            '49120',
            '49121',
            '49125',
            '49126',
            '49127',
            '49128',
            '49129',
            '49130',
            '49201',
            '49202',
            '49203',
            '49204',
            '49220',
            '49221',
            '49224',
            '49227',
            '49228',
            '49229',
            '49230',
            '49232',
            '49233',
            '49234',
            '49235',
            '49236',
            '49237',
            '49238',
            '49239',
            '49240',
            '49241',
            '49242',
            '49245',
            '49246',
            '49247',
            '49248',
            '49249',
            '49250',
            '49251',
            '49252',
            '49253',
            '49254',
            '49255',
            '49256',
            '49257',
            '49258',
            '49259',
            '49261',
            '49262',
            '49263',
            '49264',
            '49265',
            '49266',
            '49267',
            '49268',
            '49269',
            '49270',
            '49271',
            '49272',
            '49274',
            '49276',
            '49277',
            '49279',
            '49281',
            '49282',
            '49283',
            '49284',
            '49285',
            '49286',
            '49287',
            '49288',
            '49289',
            '49301',
            '49302',
            '49303',
            '49304',
            '49305',
            '49306',
            '49307',
            '49309',
            '49310',
            '49311',
            '49312',
            '49314',
            '49315',
            '49316',
            '49317',
            '49318',
            '49319',
            '49320',
            '49321',
            '49322',
            '49323',
            '49325',
            '49326',
            '49327',
            '49328',
            '49329',
            '49330',
            '49331',
            '49332',
            '49333',
            '49335',
            '49336',
            '49337',
            '49338',
            '49339',
            '49340',
            '49341',
            '49342',
            '49343',
            '49344',
            '49345',
            '49346',
            '49347',
            '49348',
            '49349',
            '49351',
            '49355',
            '49356',
            '49357',
            '49401',
            '49402',
            '49403',
            '49404',
            '49405',
            '49406',
            '49408',
            '49409',
            '49410',
            '49411',
            '49412',
            '49413',
            '49415',
            '49416',
            '49417',
            '49418',
            '49419',
            '49420',
            '49421',
            '49422',
            '49423',
            '49424',
            '49425',
            '49426',
            '49427',
            '49428',
            '49429',
            '49430',
            '49431',
            '49434',
            '49435',
            '49436',
            '49437',
            '49440',
            '49441',
            '49442',
            '49443',
            '49444',
            '49445',
            '49446',
            '49448',
            '49449',
            '49450',
            '49451',
            '49452',
            '49453',
            '49454',
            '49455',
            '49456',
            '49457',
            '49458',
            '49459',
            '49460',
            '49461',
            '49463',
            '49464',
            '49468',
            '49501',
            '49502',
            '49503',
            '49504',
            '49505',
            '49506',
            '49507',
            '49508',
            '49509',
            '49510',
            '49512',
            '49514',
            '49515',
            '49516',
            '49518',
            '49519',
            '49523',
            '49525',
            '49528',
            '49530',
            '49534',
            '49544',
            '49546',
            '49548',
            '49550',
            '49555',
            '49560',
            '49588',
            '49599',
            '49601',
            '49610',
            '49611',
            '49612',
            '49613',
            '49614',
            '49615',
            '49616',
            '49617',
            '49618',
            '49619',
            '49620',
            '49621',
            '49622',
            '49623',
            '49625',
            '49626',
            '49627',
            '49628',
            '49629',
            '49630',
            '49631',
            '49632',
            '49633',
            '49634',
            '49635',
            '49636',
            '49637',
            '49638',
            '49639',
            '49640',
            '49642',
            '49643',
            '49644',
            '49645',
            '49646',
            '49648',
            '49649',
            '49650',
            '49651',
            '49653',
            '49654',
            '49655',
            '49656',
            '49657',
            '49659',
            '49660',
            '49663',
            '49664',
            '49665',
            '49666',
            '49667',
            '49668',
            '49670',
            '49673',
            '49674',
            '49675',
            '49676',
            '49677',
            '49679',
            '49680',
            '49682',
            '49683',
            '49684',
            '49685',
            '49686',
            '49688',
            '49689',
            '49690',
            '49696',
            '49701',
            '49705',
            '49706',
            '49707',
            '49709',
            '49710',
            '49711',
            '49712',
            '49713',
            '49715',
            '49716',
            '49717',
            '49718',
            '49719',
            '49720',
            '49721',
            '49722',
            '49723',
            '49724',
            '49725',
            '49726',
            '49727',
            '49728',
            '49729',
            '49730',
            '49733',
            '49734',
            '49735',
            '49736',
            '49737',
            '49738',
            '49739',
            '49740',
            '49743',
            '49744',
            '49745',
            '49746',
            '49747',
            '49748',
            '49749',
            '49751',
            '49752',
            '49753',
            '49755',
            '49756',
            '49757',
            '49759',
            '49760',
            '49761',
            '49762',
            '49764',
            '49765',
            '49766',
            '49768',
            '49769',
            '49770',
            '49774',
            '49775',
            '49776',
            '49777',
            '49779',
            '49780',
            '49781',
            '49782',
            '49783',
            '49784',
            '49785',
            '49786',
            '49788',
            '49790',
            '49791',
            '49792',
            '49793',
            '49795',
            '49796',
            '49797',
            '49799',
            '49801',
            '49802',
            '49805',
            '49806',
            '49807',
            '49808',
            '49812',
            '49814',
            '49815',
            '49816',
            '49817',
            '49818',
            '49819',
            '49820',
            '49821',
            '49822',
            '49825',
            '49826',
            '49827',
            '49829',
            '49831',
            '49833',
            '49834',
            '49835',
            '49836',
            '49837',
            '49838',
            '49839',
            '49840',
            '49841',
            '49845',
            '49847',
            '49848',
            '49849',
            '49852',
            '49853',
            '49854',
            '49855',
            '49858',
            '49861',
            '49862',
            '49863',
            '49864',
            '49865',
            '49866',
            '49868',
            '49870',
            '49871',
            '49872',
            '49873',
            '49874',
            '49876',
            '49877',
            '49878',
            '49879',
            '49880',
            '49881',
            '49883',
            '49884',
            '49885',
            '49886',
            '49887',
            '49891',
            '49892',
            '49893',
            '49894',
            '49895',
            '49896',
            '49901',
            '49902',
            '49903',
            '49905',
            '49908',
            '49910',
            '49911',
            '49912',
            '49913',
            '49915',
            '49916',
            '49917',
            '49918',
            '49919',
            '49920',
            '49921',
            '49922',
            '49925',
            '49927',
            '49929',
            '49930',
            '49931',
            '49934',
            '49935',
            '49938',
            '49942',
            '49945',
            '49946',
            '49947',
            '49948',
            '49950',
            '49952',
            '49953',
            '49955',
            '49958',
            '49959',
            '49960',
            '49961',
            '49962',
            '49963',
            '49964',
            '49965',
            '49967',
            '49968',
            '49969',
            '49970',
            '49971',
            '01001',
            '01002',
            '01003',
            '01004',
            '01005',
            '01007',
            '01008',
            '01009',
            '01010',
            '01011',
            '01012',
            '01013',
            '01014',
            '01020',
            '01021',
            '01022',
            '01026',
            '01027',
            '01028',
            '01029',
            '01030',
            '01031',
            '01032',
            '01033',
            '01034',
            '01035',
            '01036',
            '01037',
            '01038',
            '01039',
            '01040',
            '01041',
            '01050',
            '01053',
            '01054',
            '01056',
            '01057',
            '01059',
            '01060',
            '01061',
            '01062',
            '01063',
            '01066',
            '01068',
            '01069',
            '01070',
            '01071',
            '01072',
            '01073',
            '01074',
            '01075',
            '01077',
            '01079',
            '01080',
            '01081',
            '01082',
            '01083',
            '01084',
            '01085',
            '01086',
            '01088',
            '01089',
            '01090',
            '01092',
            '01093',
            '01094',
            '01095',
            '01096',
            '01097',
            '01098',
            '01101',
            '01102',
            '01103',
            '01104',
            '01105',
            '01106',
            '01107',
            '01108',
            '01109',
            '01111',
            '01115',
            '01116',
            '01118',
            '01119',
            '01128',
            '01129',
            '01133',
            '01138',
            '01139',
            '01144',
            '01151',
            '01152',
            '01195',
            '01199',
            '01201',
            '01202',
            '01203',
            '01220',
            '01222',
            '01223',
            '01224',
            '01225',
            '01226',
            '01227',
            '01229',
            '01230',
            '01235',
            '01236',
            '01237',
            '01238',
            '01240',
            '01242',
            '01243',
            '01244',
            '01245',
            '01247',
            '01252',
            '01253',
            '01254',
            '01255',
            '01256',
            '01257',
            '01258',
            '01259',
            '01260',
            '01262',
            '01263',
            '01264',
            '01266',
            '01267',
            '01270',
            '01301',
            '01302',
            '01330',
            '01331',
            '01337',
            '01338',
            '01339',
            '01340',
            '01341',
            '01342',
            '01343',
            '01344',
            '01346',
            '01347',
            '01349',
            '01350',
            '01351',
            '01354',
            '01355',
            '01360',
            '01364',
            '01366',
            '01367',
            '01368',
            '01370',
            '01373',
            '01375',
            '01376',
            '01378',
            '01379',
            '01380',
            '01420',
            '01430',
            '01431',
            '01432',
            '01434',
            '01436',
            '01438',
            '01440',
            '01441',
            '01450',
            '01451',
            '01452',
            '01453',
            '01460',
            '01462',
            '01463',
            '01464',
            '01467',
            '01468',
            '01469',
            '01470',
            '01471',
            '01472',
            '01473',
            '01474',
            '01475',
            '01477',
            '01501',
            '01503',
            '01504',
            '01505',
            '01506',
            '01507',
            '01508',
            '01509',
            '01510',
            '01515',
            '01516',
            '01517',
            '01518',
            '01519',
            '01520',
            '01521',
            '01522',
            '01523',
            '01524',
            '01525',
            '01526',
            '01527',
            '01529',
            '01531',
            '01532',
            '01534',
            '01535',
            '01536',
            '01537',
            '01538',
            '01540',
            '01541',
            '01542',
            '01543',
            '01545',
            '01546',
            '01550',
            '01560',
            '01561',
            '01562',
            '01564',
            '01566',
            '01568',
            '01569',
            '01570',
            '01571',
            '01580',
            '01581',
            '01582',
            '01583',
            '01585',
            '01586',
            '01588',
            '01590',
            '01601',
            '01602',
            '01603',
            '01604',
            '01605',
            '01606',
            '01607',
            '01608',
            '01609',
            '01610',
            '01611',
            '01612',
            '01613',
            '01614',
            '01615',
            '01653',
            '01654',
            '01655',
            '01701',
            '01702',
            '01703',
            '01704',
            '01705',
            '01718',
            '01719',
            '01720',
            '01721',
            '01730',
            '01731',
            '01740',
            '01741',
            '01742',
            '01745',
            '01746',
            '01747',
            '01748',
            '01749',
            '01752',
            '01754',
            '01756',
            '01757',
            '01760',
            '01770',
            '01772',
            '01773',
            '01775',
            '01776',
            '01778',
            '01784',
            '01801',
            '01803',
            '01805',
            '01806',
            '01807',
            '01808',
            '01810',
            '01812',
            '01813',
            '01815',
            '01821',
            '01822',
            '01824',
            '01826',
            '01827',
            '01830',
            '01831',
            '01832',
            '01833',
            '01834',
            '01835',
            '01840',
            '01841',
            '01842',
            '01843',
            '01844',
            '01845',
            '01850',
            '01851',
            '01852',
            '01853',
            '01854',
            '01860',
            '01862',
            '01863',
            '01864',
            '01865',
            '01866',
            '01867',
            '01876',
            '01879',
            '01880',
            '01885',
            '01886',
            '01887',
            '01888',
            '01889',
            '01890',
            '01899',
            '01901',
            '01902',
            '01903',
            '01904',
            '01905',
            '01906',
            '01907',
            '01908',
            '01910',
            '01913',
            '01915',
            '01921',
            '01922',
            '01923',
            '01929',
            '01930',
            '01931',
            '01936',
            '01937',
            '01938',
            '01940',
            '01944',
            '01945',
            '01949',
            '01950',
            '01951',
            '01952',
            '01960',
            '01961',
            '01965',
            '01966',
            '01969',
            '01970',
            '01971',
            '01982',
            '01983',
            '01984',
            '01985',
            '02018',
            '02019',
            '02020',
            '02021',
            '02025',
            '02026',
            '02027',
            '02030',
            '02031',
            '02032',
            '02035',
            '02038',
            '02040',
            '02041',
            '02043',
            '02044',
            '02045',
            '02047',
            '02048',
            '02050',
            '02051',
            '02052',
            '02053',
            '02054',
            '02055',
            '02056',
            '02059',
            '02060',
            '02061',
            '02062',
            '02065',
            '02066',
            '02067',
            '02070',
            '02071',
            '02072',
            '02081',
            '02090',
            '02093',
            '02108',
            '02109',
            '02110',
            '02111',
            '02112',
            '02113',
            '02114',
            '02115',
            '02116',
            '02117',
            '02118',
            '02119',
            '02120',
            '02121',
            '02122',
            '02123',
            '02124',
            '02125',
            '02126',
            '02127',
            '02128',
            '02129',
            '02130',
            '02131',
            '02132',
            '02133',
            '02134',
            '02135',
            '02136',
            '02137',
            '02138',
            '02139',
            '02140',
            '02141',
            '02142',
            '02143',
            '02144',
            '02145',
            '02148',
            '02149',
            '02150',
            '02151',
            '02152',
            '02153',
            '02155',
            '02156',
            '02163',
            '02169',
            '02170',
            '02171',
            '02176',
            '02180',
            '02184',
            '02185',
            '02186',
            '02187',
            '02188',
            '02189',
            '02190',
            '02191',
            '02196',
            '02199',
            '02201',
            '02203',
            '02204',
            '02205',
            '02206',
            '02207',
            '02210',
            '02211',
            '02212',
            '02215',
            '02216',
            '02217',
            '02222',
            '02228',
            '02238',
            '02239',
            '02241',
            '02266',
            '02269',
            '02283',
            '02284',
            '02293',
            '02295',
            '02297',
            '02298',
            '02301',
            '02302',
            '02303',
            '02304',
            '02305',
            '02322',
            '02324',
            '02325',
            '02327',
            '02330',
            '02331',
            '02332',
            '02333',
            '02334',
            '02337',
            '02338',
            '02339',
            '02340',
            '02341',
            '02343',
            '02344',
            '02345',
            '02346',
            '02347',
            '02348',
            '02349',
            '02350',
            '02351',
            '02355',
            '02356',
            '02357',
            '02358',
            '02359',
            '02360',
            '02361',
            '02362',
            '02364',
            '02366',
            '02367',
            '02368',
            '02370',
            '02375',
            '02379',
            '02381',
            '02382',
            '02420',
            '02421',
            '02445',
            '02446',
            '02447',
            '02451',
            '02452',
            '02453',
            '02454',
            '02455',
            '02456',
            '02457',
            '02458',
            '02459',
            '02460',
            '02461',
            '02462',
            '02464',
            '02465',
            '02466',
            '02467',
            '02468',
            '02471',
            '02472',
            '02474',
            '02475',
            '02476',
            '02477',
            '02478',
            '02479',
            '02481',
            '02482',
            '02492',
            '02493',
            '02494',
            '02495',
            '02532',
            '02534',
            '02535',
            '02536',
            '02537',
            '02538',
            '02539',
            '02540',
            '02541',
            '02542',
            '02543',
            '02552',
            '02553',
            '02554',
            '02556',
            '02557',
            '02558',
            '02559',
            '02561',
            '02562',
            '02563',
            '02564',
            '02565',
            '02568',
            '02571',
            '02573',
            '02574',
            '02575',
            '02576',
            '02584',
            '02601',
            '02630',
            '02631',
            '02632',
            '02633',
            '02634',
            '02635',
            '02636',
            '02637',
            '02638',
            '02639',
            '02641',
            '02642',
            '02643',
            '02644',
            '02645',
            '02646',
            '02647',
            '02648',
            '02649',
            '02650',
            '02651',
            '02652',
            '02653',
            '02655',
            '02657',
            '02659',
            '02660',
            '02661',
            '02662',
            '02663',
            '02664',
            '02666',
            '02667',
            '02668',
            '02669',
            '02670',
            '02671',
            '02672',
            '02673',
            '02675',
            '02702',
            '02703',
            '02712',
            '02713',
            '02714',
            '02715',
            '02717',
            '02718',
            '02719',
            '02720',
            '02721',
            '02722',
            '02723',
            '02724',
            '02725',
            '02726',
            '02738',
            '02739',
            '02740',
            '02741',
            '02742',
            '02743',
            '02744',
            '02745',
            '02746',
            '02747',
            '02748',
            '02760',
            '02761',
            '02762',
            '02763',
            '02764',
            '02766',
            '02767',
            '02768',
            '02769',
            '02770',
            '02771',
            '02777',
            '02779',
            '02780',
            '02783',
            '02790',
            '02791',
            '05501',
            '05544',
        ];

        return ($this->zip_code && in_array($this->zip_code,$valid_zip_codes));
    }

    public function profileCompleted()
    {
        return $this->signup_progress == UserProfile::SIGNUP_PROGRESS_COMPLETED;
    }

    public function getQualityAttribute()
    {
        $good_credit_scores = [
            self::CREDIT_SCORE_ABOVE_800,
            self::CREDIT_SCORE_BETWEEN_750_AND_799,
            self::CREDIT_SCORE_BETWEEN_700_AND_749,
            self::CREDIT_SCORE_BETWEEN_650_AND_699,
        ];

        if ( in_array($this->credit_score, $good_credit_scores) ) {
            return self::QUALITY_GOOD;
        }

        return self::QUALITY_BAD;
    }

    public function showNotCurrentlyEmployedInfo()
    {
        return $this->loan_type === self::LOAN_TYPE_REFINANCE && ! $this->is_currently_employed;
    }

    public function showNotCurrentlyEmployedUntilDate()
    {
        if ($this->job_start_date) {
            return now()->isBefore(Carbon::createFromFormat('Y-m-d', $this->job_start_date));
        }

        return false;
    }

    public function showFederalInfo()
    {
        return in_array($this->refinance_loan_type, ['federal', 'both']);
    }
}
